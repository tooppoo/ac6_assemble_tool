# パーツ一覧ページの要求（スロット先行・確定版）

## 文脈の原則

- 一覧ページは **最初にスロット（head / core / arms / legs / …）を選択** する。
- 以降の表示・フィルタ・並び替え・お気に入りは **選択中スロットの文脈** で行われる。

---

## Who（誰のために）

- 探索しながら組みたいプレイヤー全般（初心者〜熟練者）
- 条件や候補集合を共有して議論したいコミュニティ利用者

---

## What（何を実現するか）

- **スロット選択 → 当該スロットのパーツのみ一覧表示**
- **任意属性でフィルタ・並び替え**
  - スロットで意味を持つ属性のみを提示
  - 属性未定義のパーツはフィルタ対象外、並び替えでは序列外に集約
- **お気に入りはフィルタの一種** として扱い、スロット内での絞り込みが可能
- **フィルタ済み母集団をアセンページへ受け渡し**
  - アセンでは、この母集団からのみ選択できる
- **状態の再現・共有**
  - スロット・フィルタ条件・並び順・表示モードを URL / ローカルで保持・復元できる

---

## Why（なぜ必要か）

- セレクトボックスのみでは探索的な利用が難しいため
- スロット先行により無関係な属性を除外し、探索の負荷を下げるため
- 探索（一覧）と組立（アセン）の分離で思考・UIの負担を軽減するため
- 条件や候補集合を共有・再現できるようにし、コミュニティでの議論を促進するため

---

## Where（どこで使うか）

- Webブラウザ（モバイルを第一級とし、PCでも同一行為が成立）

---

## When（どんなタイミングで）

- プレイ前の構想段階
- 攻略前後の差し替え検討時
- コミュニティでの情報共有・議論時

---

## How（どう実現するかの大枠）

1. **スロットを選択**
2. **当該スロットの一覧で探索**
   - 任意属性フィルタ
   - 並び替え
   - お気に入り絞り込み
3. **フィルタ済み母集団をアセンページに渡す**
   - スロットごとに独立した母集団として扱う

---

## スロット先行による要求上の取り扱い

- **属性提示の範囲**  
  選択中スロットで有効な属性のみ提示（他スロット属性は出さない）

- **属性未定義の扱い**
  - フィルタ時：当該属性を持たないパーツは除外
  - 並び替え時：未定義は序列外（末尾など）に集約

- **お気に入り**
  - スロット文脈内でのみ機能
  - スロット切替時に独立した集合として扱う

- **ゼロ件時の挙動**
  - 0件であることを明示（最低限）
  - 条件緩和のヒントは任意（あれば良い）

- **ドメイン制約との整合**
  - 一覧は単品探索を優先
  - 制約はアセン側で常時担保（例：タンク脚＋ブースター条件でもエラー扱いにしない）

- **受け渡し単位**
  - 常にスロット単位の母集団
  - 複数スロットの混載は行わない

- **URL共有単位**
  - 条件式（クエリ）を共有単位とし、結果スナップショット共有は要求外（将来拡張）

---

## 要求レベルの境界条件

- **スロット未選択状態は存在しない**  
  初期表示で必ず1スロットが選択されていること

- **スロット切替時の互換性**  
  前スロットで設定していた条件のうち、新スロットでも意味を持つものだけ引き継ぐ  
  無効条件はエラーにせず、「無効化された条件がある」ことをUIで示す

- **ゼロ件時の操作性**  
  0件でも主要条件やスロット切替が可能な状態を維持する

---

## 今後の要件化で詰める論点

- スロット選択UIの形（タブ / セレクト / スワイプなど）
- 表示モード（コンパクト / 詳細）の初期状態
- URL共有時の人間可読性と永続性の設計
