# Requirements Document

## Introduction

パーツ詳細パネルは、パーツ一覧ページにおいてパーツの全ステータスを閲覧するための機能です。パーツカードをクリック/タップすることで、サイドパネル（OffCanvas）形式で詳細情報を表示します。

### ビジネス価値

- **情報アクセス性の向上**: パーツカード上では表示しきれない全ステータスを、その場で確認可能に
- **探索効率の維持**: ページ遷移なしで詳細を確認でき、フィルタ・並び替えの文脈を維持
- **操作の直感性**: カードクリックという直感的な操作で詳細表示

### 参照ドキュメント

- `docs/specs/parts-list-view/requirements.md` - パーツ一覧ページ要件定義

## Requirements

### Requirement 1: パーツカードクリックによる詳細表示（Must）

**Objective:** プレイヤーとして、パーツカードをクリック/タップして、そのパーツの全ステータスを確認したい。パーツカード上では表示しきれない情報を、ページ遷移なしで確認できるようにするため。

#### Acceptance Criteria

1. WHEN プレイヤーがパーツカードをクリック/タップした THEN パーツ詳細パネル SHALL 右からスライドインするサイドパネルとして表示される
2. WHEN パーツ詳細パネルが表示された THEN パーツ詳細パネル SHALL 選択されたパーツの全ステータスを表示する
3. WHERE 表示される属性 THE パーツ詳細パネル SHALL 現在選択中のスロットに対応する属性セットを表示する
4. WHEN パーツ詳細パネルの閉じるボタンまたはパネル外をクリックした THEN パーツ詳細パネル SHALL 閉じる

### Requirement 2: お気に入りボタンとの操作区別（Must）

**Objective:** プレイヤーとして、お気に入りボタンのクリックと詳細表示のクリックを区別したい。意図しない操作を防ぐため。

#### Acceptance Criteria

1. WHEN プレイヤーがお気に入りボタン（★/☆）をクリックした THEN パーツ詳細パネル SHALL 表示されない
2. WHEN プレイヤーがお気に入りボタン（★/☆）をクリックした THEN お気に入り機能 SHALL 通常通りトグルされる
3. WHERE カードクリックの有効領域 THE パーツカード SHALL お気に入りボタン以外の領域とする

### Requirement 3: スロット変更時のパネル自動クローズ（Must）

**Objective:** プレイヤーとして、スロットを変更した時にパーツ詳細パネルが自動的に閉じてほしい。スロット変更によって表示内容が不整合になることを防ぐため。

#### Acceptance Criteria

1. WHEN プレイヤーがスロットを変更した AND パーツ詳細パネルが開いている THEN パーツ詳細パネル SHALL 自動的に閉じる
2. WHERE スロット変更時のパネル状態 THE パーツ詳細パネル SHALL 選択中パーツの情報をクリアする

### Requirement 4: 属性の動的表示（Must）

**Objective:** プレイヤーとして、パーツカテゴリ（武器、フレーム、内部部品など）に応じた属性セットを見たい。カテゴリごとに異なる属性を持つパーツの情報を正確に把握するため。

#### Acceptance Criteria

1. WHEN 武器系パーツ（Unit）の詳細を表示した THEN パーツ詳細パネル SHALL 攻撃力、衝撃力、射程などの武器属性を表示する
2. WHEN フレーム系パーツ（Frame）の詳細を表示した THEN パーツ詳細パネル SHALL AP、防御力、姿勢安定性能などのフレーム属性を表示する
3. WHEN 内部部品（Inner）の詳細を表示した THEN パーツ詳細パネル SHALL ブースター/FCS/ジェネレータ固有の属性を表示する
4. WHERE 属性の値が存在しない THE パーツ詳細パネル SHALL その属性を表示しない

### Requirement 5: 属性ラベルの多言語対応（Must）

**Objective:** プレイヤーとして、属性ラベルを選択中の言語で確認したい。日本語/英語の切り替えに対応するため。

#### Acceptance Criteria

1. WHEN 日本語モードで表示した THEN パーツ詳細パネル SHALL 属性ラベルを日本語で表示する
2. WHEN 英語モードで表示した THEN パーツ詳細パネル SHALL 属性ラベルを英語で表示する
3. WHERE 属性値のフォーマット THE パーツ詳細パネル SHALL 数値をロケールに応じてフォーマットする

## 非機能要件

### Performance

1. WHEN パーツカードをクリックした THEN パーツ詳細パネル SHALL 即座（100ms以内）にアニメーション開始する
2. WHERE 属性リストの計算 THE パーツ詳細パネル SHALL スロット変更時に属性セットを再計算する

### Usability

1. WHERE モバイル環境 THE パーツ詳細パネル SHALL タップ操作で開閉可能である
2. WHERE パネルの視認性 THE パーツ詳細パネル SHALL 十分な幅で属性ラベルと値を表示する

### Accessibility

1. WHERE パネルの操作 THE パーツ詳細パネル SHALL キーボード操作（Escで閉じる）に対応する
2. WHERE スクリーンリーダー THE パーツ詳細パネル SHALL 適切なARIA属性を持つ

## 優先度サマリー（MoSCoW）

### Must（必須）

- Requirement 1: パーツカードクリックによる詳細表示
- Requirement 2: お気に入りボタンとの操作区別
- Requirement 3: スロット変更時のパネル自動クローズ
- Requirement 4: 属性の動的表示
- Requirement 5: 属性ラベルの多言語対応

### Won't（当面スコープ外）

- パーツ比較機能（複数パーツの詳細を並べて比較）
- 詳細パネルからの直接アセンブリ追加
- 詳細情報の共有URL生成
